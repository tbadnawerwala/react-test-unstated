{"ast":null,"code":"// import { takeLatest, put, select, delay } from 'redux-saga/effects';\nimport { fetchCustomerListStart, fetchCustomerListSuccess, fetchCustomerListAddSuccess, updateCustomerList } from '../reducers/customer-list'; // import {resetAddCustomerState} from '../reducers/add-customer';\n// import { \n//   ADD_CUSTOMER, \n//   UPDATE_CUSTOMER, \n//   DELETE_CUSTOMER \n// } from './actions/actions';\n\nimport Customer from '../services/customer';\nimport { v4 as uuidv4 } from 'uuid'; // function* customerListWatcher() {\n//   yield takeLatest([ \n//     fetchCustomerListStart.type, \n//     ADD_CUSTOMER, \n//     UPDATE_CUSTOMER, \n//     DELETE_CUSTOMER ], CustomerListWorker)\n// }\n\nexport const initialState = [];\nexport function CustomerListWorker(action) {\n  try {\n    switch (action.type) {\n      case fetchCustomerListStart.type:\n        {\n          const data = Customer.getCustomerList();\n          console.log('data', data); //yield put(fetchCustomerListSuccess({ customerData: data }));\n\n          break;\n        }\n\n      case 'ADD_CUSTOMER':\n        {\n          // const { customer } = yield select((state) => state.addCustomer)\n          if (!(customer && customer.customerGroup && customer.customerGroup.trim())) {\n            alert('Customer group should not be empty!');\n            return;\n          }\n\n          if (!(customer && customer.customerName && customer.customerName.trim())) {\n            alert('Customer name should not be empty!');\n            return;\n          } // yield put(fetchCustomerListAddSuccess({ \n          //   newCustomerData: {\n          //     model: \"accounts_receivable.cusgrp\",\n          //     pk: uuidv4(),\n          //     fields: {\n          //       customer_group: customer.customerGroup,\n          //       csgrp_name: customer.customerName\n          //     }\n          //   }}\n          // ));\n          // yield put(resetAddCustomerState());\n\n\n          break;\n        }\n\n      case 'UPDATE_CUSTOMER':\n        {\n          const {\n            id,\n            newCustomerName\n          } = action.payload;\n\n          if (!(newCustomerName && newCustomerName.trim())) {\n            alert('Customer name should not be empty!');\n            return;\n          } // let {customerList} = yield select((state) => state.customerList);\n          // const clonedCustomerList = JSON.parse(JSON.stringify(customerList));\n          // const index = clonedCustomerList.findIndex((customer) => customer.pk === id);\n          // clonedCustomerList[index].fields.csgrp_name = newCustomerName;\n          // yield put(updateCustomerList({ customerList: clonedCustomerList }));\n          // // Use custom delay\n          // yield delay(600);\n          // alert('Customer name has been successfully updated!');\n\n\n          break;\n        }\n\n      case 'DELETE_CUSTOMER':\n        {\n          // const {id} = action.payload;\n          // const {customerList} = yield select((state) => state.customerList);\n          // const clonedCustomerList = JSON.parse(JSON.stringify(customerList));\n          // const updatedCustomerList = clonedCustomerList.filter((customer) => customer.pk !== id);\n          // yield put(updateCustomerList({ customerList: updatedCustomerList }));\n          // // Use custom delay\n          // yield delay(600);\n          // alert('Customer has been successfully deleted!');\n          break;\n        }\n\n      default:\n        break;\n    }\n  } catch (e) {\n    console.error(`Error occuring while calling an action ${action.type}`, e);\n  }\n} // export default CustomerListWorker\n\n_c = CustomerListWorker;\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomerListWorker\");","map":{"version":3,"sources":["/home/rails/react-test-code-contextAPI/src/contextAPI/contextReducer.js"],"names":["fetchCustomerListStart","fetchCustomerListSuccess","fetchCustomerListAddSuccess","updateCustomerList","Customer","v4","uuidv4","initialState","CustomerListWorker","action","type","data","getCustomerList","console","log","customer","customerGroup","trim","alert","customerName","id","newCustomerName","payload","e","error"],"mappings":"AAAA;AACA,SACEA,sBADF,EAEEC,wBAFF,EAGEC,2BAHF,EAIEC,kBAJF,QAKO,2BALP,C,CAMA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,YAAY,GAAG,EAArB;AAEP,OAAO,SAASC,kBAAT,CAA4BC,MAA5B,EAAoC;AACzC,MAAI;AACF,YAAQA,MAAM,CAACC,IAAf;AACE,WAAKV,sBAAsB,CAACU,IAA5B;AAAkC;AAChC,gBAAMC,IAAI,GAAGP,QAAQ,CAACQ,eAAT,EAAb;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBH,IAAnB,EAFgC,CAGhC;;AACA;AACD;;AACD,WAAK,cAAL;AAAqB;AACpB;AACC,cAAI,EAAEI,QAAQ,IAAIA,QAAQ,CAACC,aAArB,IAAsCD,QAAQ,CAACC,aAAT,CAAuBC,IAAvB,EAAxC,CAAJ,EAA4E;AAC1EC,YAAAA,KAAK,CAAC,qCAAD,CAAL;AACA;AACD;;AAED,cAAI,EAAEH,QAAQ,IAAIA,QAAQ,CAACI,YAArB,IAAqCJ,QAAQ,CAACI,YAAT,CAAsBF,IAAtB,EAAvC,CAAJ,EAA0E;AACxEC,YAAAA,KAAK,CAAC,oCAAD,CAAL;AACA;AACD,WAVkB,CAYnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACD;;AACD,WAAK,iBAAL;AAAwB;AACtB,gBAAM;AAACE,YAAAA,EAAD;AAAKC,YAAAA;AAAL,cAAwBZ,MAAM,CAACa,OAArC;;AACA,cAAI,EAAED,eAAe,IAAIA,eAAe,CAACJ,IAAhB,EAArB,CAAJ,EAAkD;AAChDC,YAAAA,KAAK,CAAC,oCAAD,CAAL;AACA;AACD,WALqB,CAMtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACD;;AACD,WAAK,iBAAL;AAAwB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;AACD;AACE;AA5DJ;AA8DD,GA/DD,CA+DE,OAAOK,CAAP,EAAU;AACVV,IAAAA,OAAO,CAACW,KAAR,CAAe,0CAAyCf,MAAM,CAACC,IAAK,EAApE,EAAuEa,CAAvE;AACD;AACF,C,CAED;;KArEgBf,kB","sourcesContent":["// import { takeLatest, put, select, delay } from 'redux-saga/effects';\nimport {\n  fetchCustomerListStart,\n  fetchCustomerListSuccess,\n  fetchCustomerListAddSuccess,\n  updateCustomerList\n} from '../reducers/customer-list';\n// import {resetAddCustomerState} from '../reducers/add-customer';\n// import { \n//   ADD_CUSTOMER, \n//   UPDATE_CUSTOMER, \n//   DELETE_CUSTOMER \n// } from './actions/actions';\nimport Customer from '../services/customer';\nimport { v4 as uuidv4 } from 'uuid';\n\n// function* customerListWatcher() {\n//   yield takeLatest([ \n//     fetchCustomerListStart.type, \n//     ADD_CUSTOMER, \n//     UPDATE_CUSTOMER, \n//     DELETE_CUSTOMER ], CustomerListWorker)\n// }\n\nexport const initialState = [];\n\nexport function CustomerListWorker(action) {\n  try {\n    switch (action.type) {\n      case fetchCustomerListStart.type: {\n        const data = Customer.getCustomerList();\n        console.log('data',data)\n        //yield put(fetchCustomerListSuccess({ customerData: data }));\n        break;\n      }\n      case 'ADD_CUSTOMER': {\n       // const { customer } = yield select((state) => state.addCustomer)\n        if (!(customer && customer.customerGroup && customer.customerGroup.trim())) {\n          alert('Customer group should not be empty!');\n          return;\n        }\n        \n        if (!(customer && customer.customerName && customer.customerName.trim())) {\n          alert('Customer name should not be empty!');\n          return;\n        }\n\n        // yield put(fetchCustomerListAddSuccess({ \n        //   newCustomerData: {\n        //     model: \"accounts_receivable.cusgrp\",\n        //     pk: uuidv4(),\n        //     fields: {\n        //       customer_group: customer.customerGroup,\n        //       csgrp_name: customer.customerName\n        //     }\n        //   }}\n        // ));\n        // yield put(resetAddCustomerState());\n        break;\n      }\n      case 'UPDATE_CUSTOMER': {\n        const {id, newCustomerName} = action.payload;\n        if (!(newCustomerName && newCustomerName.trim())) {\n          alert('Customer name should not be empty!');\n          return;\n        }\n        // let {customerList} = yield select((state) => state.customerList);\n        // const clonedCustomerList = JSON.parse(JSON.stringify(customerList));\n        // const index = clonedCustomerList.findIndex((customer) => customer.pk === id);\n        // clonedCustomerList[index].fields.csgrp_name = newCustomerName;\n        // yield put(updateCustomerList({ customerList: clonedCustomerList }));\n        // // Use custom delay\n        // yield delay(600);\n        // alert('Customer name has been successfully updated!');\n        break;\n      }\n      case 'DELETE_CUSTOMER': {\n        // const {id} = action.payload;\n        // const {customerList} = yield select((state) => state.customerList);\n        // const clonedCustomerList = JSON.parse(JSON.stringify(customerList));\n        // const updatedCustomerList = clonedCustomerList.filter((customer) => customer.pk !== id);\n        // yield put(updateCustomerList({ customerList: updatedCustomerList }));\n        // // Use custom delay\n        // yield delay(600);\n        // alert('Customer has been successfully deleted!');\n        break;\n      }\n      default:\n        break\n    }\n  } catch (e) {\n    console.error(`Error occuring while calling an action ${action.type}`, e);\n  }\n}\n\n// export default CustomerListWorker\n"]},"metadata":{},"sourceType":"module"}