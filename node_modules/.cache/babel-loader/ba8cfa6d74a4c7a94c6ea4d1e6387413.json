{"ast":null,"code":"// import { takeLatest, put, select, delay } from 'redux-saga/effects';\nimport { fetchCustomerListStart, fetchCustomerListSuccess, fetchCustomerListAddSuccess, updateCustomerList, addCustomerData } from './customerReducer'; // import {resetAddCustomerState} from '../reducers/add-customer';\n// import { \n//   ADD_CUSTOMER, \n//   UPDATE_CUSTOMER, \n//   DELETE_CUSTOMER \n// } from './actions/actions';\n\nimport Customer from '../redux/services/customer';\nimport { v4 as uuidv4 } from 'uuid'; // function* customerListWatcher() {\n//   yield takeLatest([ \n//     fetchCustomerListStart.type, \n//     ADD_CUSTOMER, \n//     UPDATE_CUSTOMER, \n//     DELETE_CUSTOMER ], CustomerListWorker)\n// }\n\nexport const initialState = {\n  isLoading: null,\n  error: null,\n  customerList: [],\n  customer: {\n    customerName: '',\n    customerGroup: ''\n  }\n};\nexport const customerData = () => ({\n  type: 'CUSTOMER_LIST'\n});\nexport const saveCustomer = () => ({\n  type: 'SAVE_CUSTOMER'\n});\nexport const addCustomer = data => ({\n  type: 'ADD_CUSTOMER',\n  payload: data\n});\nexport const updateCustomer = () => ({\n  type: 'UPDATE_CUSTOMER'\n});\nexport const deleteCustomer = () => ({\n  type: 'DELETE_CUSTOMER'\n});\nexport const CustomerListWorker = (state, action) => {\n  try {\n    switch (action.type) {\n      case 'CUSTOMER_LIST':\n        {\n          const data = Customer.getCustomerList();\n          console.log('state', state); // return {\n          //     ...state,\n          //     customerList: data,\n          //     isLoading: false\n          // }\n\n          return fetchCustomerListSuccess({\n            customerData: data\n          }); //yield put(fetchCustomerListSuccess({ customerData: data }));\n\n          break;\n        }\n\n      case 'ADD_CUSTOMER':\n        {\n          console.log(state);\n          const {\n            customer\n          } = state;\n          return addCustomerData({\n            customer: customer\n          });\n          break;\n        }\n\n      case 'SAVE_CUSTOMER':\n        {\n          console.log('add customer', state);\n          const {\n            customer\n          } = state;\n\n          if (!(customer && customer.customerGroup && customer.customerGroup.trim())) {\n            alert('Customer group should not be empty!');\n            return;\n          }\n\n          if (!(customer && customer.customerName && customer.customerName.trim())) {\n            alert('Customer name should not be empty!');\n            return;\n          }\n\n          return fetchCustomerListAddSuccess({\n            newCustomerData: {\n              model: \"accounts_receivable.cusgrp\",\n              pk: uuidv4(),\n              fields: {\n                customer_group: customer.customerGroup,\n                csgrp_name: customer.customerName\n              }\n            }\n          }); // yield put(resetAddCustomerState());\n\n          break;\n        }\n\n      case 'UPDATE_CUSTOMER':\n        {\n          console.log('update customer', state);\n          const {\n            id,\n            newCustomerName\n          } = action.payload;\n\n          if (!(newCustomerName && newCustomerName.trim())) {\n            alert('Customer name should not be empty!');\n            return;\n          }\n\n          let {\n            customerList\n          } = state;\n          const clonedCustomerList = JSON.parse(JSON.stringify(customerList));\n          const index = clonedCustomerList.findIndex(customer => customer.pk === id);\n          clonedCustomerList[index].fields.csgrp_name = newCustomerName; // yield put(updateCustomerList({ customerList: clonedCustomerList }));\n\n          return updateCustomerList({\n            customerList: clonedCustomerList\n          }); // Use custom delay\n          // yield delay(600);\n          // alert('Customer name has been successfully updated!');\n\n          break;\n        }\n\n      case 'DELETE_CUSTOMER':\n        {\n          const {\n            id\n          } = action.payload;\n          const {\n            customerList\n          } = state;\n          const clonedCustomerList = JSON.parse(JSON.stringify(customerList));\n          const updatedCustomerList = clonedCustomerList.filter(customer => customer.pk !== id);\n          return updateCustomerList({\n            customerList: updatedCustomerList\n          }); // // Use custom delay\n          // yield delay(600);\n          // alert('Customer has been successfully deleted!');\n\n          break;\n        }\n\n      default:\n        return { ...state\n        };\n        break;\n    }\n  } catch (e) {\n    console.error(`Error occuring while calling an action ${action.type}`, e);\n  }\n}; // export default CustomerListWorker\n\n_c = CustomerListWorker;\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomerListWorker\");","map":{"version":3,"sources":["/home/rails/react-test-code-contextAPI/src/contextAPI/contextReducer.js"],"names":["fetchCustomerListStart","fetchCustomerListSuccess","fetchCustomerListAddSuccess","updateCustomerList","addCustomerData","Customer","v4","uuidv4","initialState","isLoading","error","customerList","customer","customerName","customerGroup","customerData","type","saveCustomer","addCustomer","data","payload","updateCustomer","deleteCustomer","CustomerListWorker","state","action","getCustomerList","console","log","trim","alert","newCustomerData","model","pk","fields","customer_group","csgrp_name","id","newCustomerName","clonedCustomerList","JSON","parse","stringify","index","findIndex","updatedCustomerList","filter","e"],"mappings":"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","sourcesContent":["// import { takeLatest, put, select, delay } from 'redux-saga/effects';\nimport {\n  fetchCustomerListStart,\n  fetchCustomerListSuccess,\n  fetchCustomerListAddSuccess,\n  updateCustomerList,\n  addCustomerData\n} from './customerReducer';\n// import {resetAddCustomerState} from '../reducers/add-customer';\n// import { \n//   ADD_CUSTOMER, \n//   UPDATE_CUSTOMER, \n//   DELETE_CUSTOMER \n// } from './actions/actions';\nimport Customer from '../redux/services/customer';\nimport { v4 as uuidv4 } from 'uuid';\n\n// function* customerListWatcher() {\n//   yield takeLatest([ \n//     fetchCustomerListStart.type, \n//     ADD_CUSTOMER, \n//     UPDATE_CUSTOMER, \n//     DELETE_CUSTOMER ], CustomerListWorker)\n// }\n\nexport const initialState = {\n    isLoading: null,\n    error: null,\n    customerList: [],\n    customer:{\n      customerName: '',\n      customerGroup: ''\n    }\n  }\n\n  \nexport const customerData = () => ({type: 'CUSTOMER_LIST'});\nexport const saveCustomer = () => ({type: 'SAVE_CUSTOMER'});\nexport const addCustomer = (data) => ({type: 'ADD_CUSTOMER' , payload: data});\nexport const updateCustomer = () => ({type: 'UPDATE_CUSTOMER'});\nexport const deleteCustomer = () => ({type: 'DELETE_CUSTOMER'})\nexport const CustomerListWorker = (state,action)=> {\n  \n  try {\n    switch (action.type) {\n      case 'CUSTOMER_LIST': {\n        const data = Customer.getCustomerList();\n        \n        console.log('state', state)\n        // return {\n        //     ...state,\n        //     customerList: data,\n        //     isLoading: false\n        // }\n       return  fetchCustomerListSuccess({customerData: data})\n        //yield put(fetchCustomerListSuccess({ customerData: data }));\n        break;\n      }\n\n      case 'ADD_CUSTOMER': {\n        console.log(state)\n        const {customer} = state;\n        return addCustomerData({customer: customer})\n        break;\n      }\n\n      case 'SAVE_CUSTOMER': {\n          console.log('add customer', state)\n       const { customer } = state\n        if (!(customer && customer.customerGroup && customer.customerGroup.trim())) {\n          alert('Customer group should not be empty!');\n          return;\n        }\n        \n        if (!(customer && customer.customerName && customer.customerName.trim())) {\n          alert('Customer name should not be empty!');\n          return;\n        }\n\n          return fetchCustomerListAddSuccess({ \n          newCustomerData: {\n            model: \"accounts_receivable.cusgrp\",\n            pk: uuidv4(),\n            fields: {\n              customer_group: customer.customerGroup,\n              csgrp_name: customer.customerName\n            }\n          }}\n        );\n        // yield put(resetAddCustomerState());\n        break;\n      }\n      case 'UPDATE_CUSTOMER': {\n          console.log('update customer', state)\n          const {id, newCustomerName} = action.payload;\n        if (!(newCustomerName && newCustomerName.trim())) {\n          alert('Customer name should not be empty!');\n          return;\n        }\n        let {customerList} = state;\n        const clonedCustomerList = JSON.parse(JSON.stringify(customerList));\n        const index = clonedCustomerList.findIndex((customer) => customer.pk === id);\n        clonedCustomerList[index].fields.csgrp_name = newCustomerName;\n        // yield put(updateCustomerList({ customerList: clonedCustomerList }));\n      return  updateCustomerList({ customerList: clonedCustomerList })\n        // Use custom delay\n        // yield delay(600);\n        // alert('Customer name has been successfully updated!');\n        break;\n      }\n      case 'DELETE_CUSTOMER': {\n        const {id} = action.payload;\n        const {customerList} = state;\n        const clonedCustomerList = JSON.parse(JSON.stringify(customerList));\n        const updatedCustomerList = clonedCustomerList.filter((customer) => customer.pk !== id);\n       return updateCustomerList({ customerList: updatedCustomerList });\n        // // Use custom delay\n        // yield delay(600);\n        // alert('Customer has been successfully deleted!');\n        break;\n      }\n      default:\n        return {\n          ...state\n        }\n        break\n    }\n  } catch (e) {\n    console.error(`Error occuring while calling an action ${action.type}`, e);\n  }\n}\n\n// export default CustomerListWorker\n"]},"metadata":{},"sourceType":"module"}